<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ECO 4000 Statistical Analysis for Economics and Finance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-47435d7ddf025d6c7757ae92cdc366aa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<meta property="og:title" content="ECO 4000 Statistical Analysis for Economics and Finance">
<meta property="og:description" content="Spring 2023">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv-aman-desai.pdf"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../presentations.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ECO 4000 Statistical Analysis for Economics and Finance</h1>
<p class="subtitle lead">Spring 2023</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style type="text/css">

h1 {
  font-family: 'Source Sans Pro', sans-serif;
  font-size: 28px;
  color: #333333;
  border-bottom: 2px solid #333333;
  padding-bottom: 10px;
}

h2 {
  font-family: 'Source Sans Pro', sans-serif;
  font-size: 24px;
  color: #444444;
  border-bottom: 1px solid #444444;
  padding-bottom: 8px;
}

h3 {
  font-family: 'Source Sans Pro', sans-serif;
  font-size: 20px;
  color: #555555;
  font-style: italic;
}

body {
  font-family: 'Source Sans Pro', sans-serif;
  font-weight: 400;
}
</style>
<section id="instructor-information" class="level2">
<h2 class="anchored" data-anchor-id="instructor-information">Instructor Information</h2>
<p><strong>Name</strong> : Aman Ojas Desai<br>
<strong>Email</strong> : adesai@gradcenter.cuny.edu<br>
<strong>Class Schedule</strong> : MoWe 10:45AM - 12:00PM (In-Person)<br>
<strong>Room</strong> : B - Vert 11-150<br>
<strong>Office Hours</strong>: MoWe 9:30 AM - 10:30 AM (B-Vert 10-260 A)</p>
</section>
<section id="course-description" class="level2">
<h2 class="anchored" data-anchor-id="course-description">Course Description</h2>
<p>The course introduces econometric techniques useful to conduct empirical analysis in economics and finance. The purpose of the course is to enable the student to master the concepts and be able to complete an independent empirical project.</p>
</section>
<section id="enrollment-requirements" class="level2">
<h2 class="anchored" data-anchor-id="enrollment-requirements">Enrollment Requirements</h2>
<p>STA 2000 or equivalent and ZICK or ZKTP Student Group and ECO-BA Plan or STA-BA Plan or FIN-BBA Plan or ECO-BBA Plan or ECO-MIN or ZKECOF-MIN Plan and with 45 credits.</p>
</section>
<section id="learning-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="learning-outcomes">Learning Outcomes</h2>
<p>Firms, governmental or non-governmental agencies, regulators, experts, etc., all rely increasingly on data analysis to assess situations and take decisions. Statistical analysis and econometrics offer powerful tools that are easy to use but that need to be used properly. Interpreting results correctly from a statistical analysis is also paramount to the discipline.<br>
</p>
<p>By the end of the semester students will be able to:</p>
<ul>
<li>Handle data in a professional manner<br>
</li>
<li>Know how to use different statistical programs and know which one is the most appropriate for the type of study.&nbsp;</li>
<li>Recognize the main pitfalls encountered in statistical analysis.&nbsp;</li>
<li>Develop knowledge of the basic principles of probability and statistics<br>
</li>
<li>Develop understanding of the Linear Regression Model (LRM) and its use in modeling the relationship between economic and financial variables<br>
</li>
<li>Be able to estimate and test hypothesis about the parameters of the LRM<br>
</li>
<li>Be able to conduct an empirical investigation using econometric techniques<br>
</li>
<li>Be able to present the results of a statistical analysis.<br>
</li>
</ul>
</section>
<section id="course-materials" class="level2">
<h2 class="anchored" data-anchor-id="course-materials">Course Materials</h2>
<p>We will use this site as well as the Blackboard for our purposes in this course. The course will be self - contained. You will not have to buy a textbook. Econometrics is a major component of research in economics and finance. There are many textbooks and supplementary material to be found on the internet including video tutorials, practice problems, and handouts. Students having doubts about the adequacy of a specific source should discuss with the instructor. Students who wish to acquire a textbook should preferably consider one of the following textbooks.<br>
</p>
<p><strong>Recommended Books</strong><br>
</p>
<ul>
<li><a href="https://www.pearson.com/us/higher-education/program/Stock-Introduction-to-Econometrics-Plus-My-Lab-Economics-with-Pearson-e-Text-Access-Card-Package-4th-Edition/PGM2416966.html">Introduction to Econometrics, 4th Edition (Pearson), by James Stock and Mark Watson. (SW)</a><br>
</li>
<li><a href="https://www.cengage.com/c/introductory-econometrics-a-modern-approach-6e-wooldridge/9781305270107/">Introductory Econometrics: A Modern Approach, 6th Edition (Cengage), by Jeffery M. Wooldridge (W)</a><br>
</li>
<li><a href="https://www.amazon.com/Basic-Econometrics-Damodar-N-Gujarati/dp/0073375772">Basic Econometrics, 5th Edition, by Damodar N Gujarati and Dawn C. Porter (GP)</a><br>
</li>
<li><a href="https://www.amazon.com/Introduction-Econometrics-Christopher-Dougherty/dp/0199676828">Introduction to Econometrics, 5th Edition (Oxford University Press), by Christopher Dougherty (CD)</a><br>
</li>
</ul>
<p><strong>Open Access</strong></p>
<ul>
<li><p><a href="https://www.econometrics-with-r.org/">Introduction to Econometrics with R</a></p></li>
<li><p><a href="https://open.umn.edu/opentextbooks/textbooks/intermediate-statistics-with-r">Intermediate Statistics with R</a></p></li>
<li><p><a href="https://openstax.org/details/introductory-statistics">Introductory Statistics</a></p></li>
</ul>
</section>
<section id="important-dates" class="level2">
<h2 class="anchored" data-anchor-id="important-dates">Important Dates</h2>
<p>(For the latest updates please follow: https://www.baruch.cuny.edu/registrar/registration/academic-calendar.html)<br>
<strong>No Classes on Following Days</strong><br>
February - 13,20 (Mo) [21 (Tue) classes follow Monday schedule]<br>
April - 5-13 Spring Recess<br>
Final Exam – As per Baruch College’s Schedule</p>
</section>
<section id="grading-policy" class="level2">
<h2 class="anchored" data-anchor-id="grading-policy">Grading Policy</h2>
<section id="course-evaluation-scheme" class="level3">
<h3 class="anchored" data-anchor-id="course-evaluation-scheme">Course Evaluation Scheme</h3>
<p><strong>DataCamp Exercises</strong> - 20%<br>
<strong>Assignments</strong> - 30%<br>
<strong>Written Exam</strong> - 30%<br>
<strong>Final Group Project</strong> - 20%<br>
</p>
</section>
<section id="grading-system" class="level3">
<h3 class="anchored" data-anchor-id="grading-system">Grading System</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Letter</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Grade (over 100)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">93-100</td>
</tr>
<tr class="even">
<td style="text-align: left;">A-</td>
<td style="text-align: left;">90-92.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">B+</td>
<td style="text-align: left;">87.1-89.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">83-87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">B-</td>
<td style="text-align: left;">80-82.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">C+</td>
<td style="text-align: left;">77.1-79.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">73-77</td>
</tr>
<tr class="even">
<td style="text-align: left;">C-</td>
<td style="text-align: left;">70-72.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D+</td>
<td style="text-align: left;">67.1-69.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: left;">60-67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: left;">below 60</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="required-software" class="level2">
<h2 class="anchored" data-anchor-id="required-software">Required Software</h2>
<p>The assignments throughout the semester will involve some problems that require coding. The primary software for the class will be R as it is open source and available for free to all. Please find these links below to install R and R-Studio on your machine.</p>
<p>Install R - https://cran.r-project.org/</p>
<p>Install R studio - https://www.rstudio.com/products/rstudio/download/</p>
</section>
<section id="datacamp-access-for-students" class="level2">
<h2 class="anchored" data-anchor-id="datacamp-access-for-students">Datacamp Access for Students</h2>
<p>Students will have a free subscription for six months to more than 360 courses on <a href="https://www.datacamp.com/"><strong>Datacamp</strong></a> under <strong>Datacamp for Classroom</strong>. You will be sent an invite link by the instructor. You are required to sign up using your Baruch email address. <strong>Do not use other email addresses. They will not work.</strong></p>
</section>
<section id="policy-regarding-make-up-exams-and-deadline-extensions" class="level2">
<h2 class="anchored" data-anchor-id="policy-regarding-make-up-exams-and-deadline-extensions">Policy Regarding Make-up Exams and Deadline Extensions</h2>
<p>Students are responsible for checking the exam dates as well as assignment submission dates and avoid any conflict with other commitments. There will be a make up exam only if:</p>
<ul>
<li>The student has contacted the instructor before the exam and the instructor has agreed to organize a make-up exam (interviews or business trips do not constitute a valid excuse to have a makeup).<br>
</li>
<li>There is a case of documented serious illness, civic obligation, accident.<br>
</li>
</ul>
</section>
<section id="attendance-and-lateness-policies" class="level2">
<h2 class="anchored" data-anchor-id="attendance-and-lateness-policies">Attendance and Lateness Policies</h2>
<p>Attendance will not be checked. It is the students’ responsibility to attend classes. Sometimes, some information that is relevant for the midterm and the final exam will be given during the class (information that will not be found on lecture notes, books, or other supports).</p>
</section>
<section id="counselling-service" class="level2">
<h2 class="anchored" data-anchor-id="counselling-service">Counselling Service</h2>
<p>At Baruch, we acknowledge that as a student, you are balancing many demands. During the semester, if you start to experience personal difficulties or stressors that are interfering with your academic performance or day to day functioning, please consider seeking free and confidential support at the Baruch College Counseling Center. For more information or to make an appointment, please visit their website at https://studentaffairs.baruch.cuny.edu/counseling/ or call 646-312-2155. If it’s outside of business hours (Monday-Friday 9-5pm) and you need immediate assistance, please call 1-888-NYC-WELL (888-692-9355). If you are concerned about one of your classmates, please share that concern by filling out a Campus Intervention Team form at https://studentaffairs.baruch.cuny.edu/campus-intervention-team.</p>
</section>
<section id="student-disabilities-service" class="level2">
<h2 class="anchored" data-anchor-id="student-disabilities-service">Student Disabilities Service</h2>
<p>We have a process at Baruch for determining whether a student who identifies as disabled is eligible for reasonable accommodations in order to complete the student’s academic program. We strive to ensure that no student with a disability is discriminated against and that none is denied participation in college programs and activities for lack of reasonable accommodations. Some people think that a disability has to be visible to be accommodated. This is not the case. There are many disabilities – diabetes, psychological illness, learning disabilities, AIDS, seizure disorders, arthritis, etc., – that require accommodations. Examples of accommodations include additional testing time; adaptive equipment; and taping of classes. If you feel that you may need a reasonable accommodation based on a disability, please contact the staff at the Office of Disability Services, Newman Vertical Campus, Room 2-271, or by phone at (646) 312-4590.</p>
</section>
<section id="academic-integrity" class="level2">
<h2 class="anchored" data-anchor-id="academic-integrity">Academic Integrity</h2>
<p>I fully support Baruch College’s policy on Academic, which states, in part:</p>
<p>“Academic dishonesty is unacceptable and will not be tolerated. Cheating, forgery, plagiarism, and collusion in dishonest acts undermine the college’s educational mission and the students’ personal and intellectual growth. Baruch students are expected to bear individual responsibility for their work, to learn the rules and definitions that underlie the practice of academic integrity, and to uphold its ideals. Ignorance of the rules is not an acceptable excuse for disobeying them. Any student who attempts to compromise or devalue the academic process will be sanctioned.” Additional information can be found at http://www.baruch.cuny.edu/academic/academic_honesty.html</p>
<p>Students caught cheating will first receive a PEN grade and a report of suspected academic dishonesty will be sent to the Office of the Dean of Students. That grade will then be changed to an F grade (on top of the penalty decided by the Office of the Dean of Students).</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>